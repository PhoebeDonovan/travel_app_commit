{"code":"!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=1)}([function(e,t,n){},function(e,t,n){\"use strict\";n.r(t);let o=new Date;o.getMonth(),o.getDate(),o.getFullYear();async function r(){const e=document.getElementById(\"city\").value,t=new Date(document.getElementById(\"start_date\").value),n=new Date(document.getElementById(\"end_date\").value);let r,a,i;if(\"\"!=document.getElementById(\"city\").value)try{const c=await fetch(`http://api.geonames.org/searchJSON?q=${e}&maxRows=1&username=Soph13`);if(!c.ok)throw new Error(\"Error: \"+c.status);const s=await c.json();r=s.geonames[0].lat,a=s.geonames[0].lng,i=s.geonames[0].countryName,console.log(\"Latitude:\",r),console.log(\"Longitude:\",a),console.log(\"Country Name:\",i);const u=await fetch(`https://pixabay.com/api/?key=38378808-06119754e49cc79e1d83890eb&q=${encodeURIComponent(i)}&image_type=photo`);if(!u.ok)throw new Error(\"Error: \"+u.status);const l=await u.json();let d=\"\";d=217186!=l.hits[0].id&&l.hits.length>0?l.hits[0].webformatURL:\"https://images.unsplash.com/photo-1444703686981-a3abbc4d4fe3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80\";const m=document.getElementById(\"countryImage\");m.src=d,\"\"!=d&&(m.style.display=\"block\"),m.alt=`Image of ${i}`;let f=\"\";217186!=l.hits[0].id&&l.hits.length>0?f+=`\\n      <div>\\n        <h4>Enjoy your visit to ${i}<h4>\\n      </div>\\n    `:f+=\"\\n      <div>\\n        <h4>You're still on Earth, but did you enter a city name above?<h4>\\n      </div>\\n    \",document.getElementById(\"imageHeader\").innerHTML=f;const p=n.getTime()-o.getTime();if(p/864e5>1){const o=`https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/${e}/${t.toISOString()}/${n.toISOString()}?key=6V2W7DPS5FP4QDZ4TCN4DR9QT`,r=await fetch(o);if(!r.ok)throw new Error(\"Error: \"+r.status);const a=await r.json();let i=\"\";for(const e of a.days){const t=e.datetime,n=e.tempmax,o=e.tempmin;i+=`\\n          <div>\\n            <p>Date: ${t}</p>\\n            <p>Weather: ${e.conditions}</p>\\n            <p>Maximum temperature: ${n}</p>\\n            <p>Minimum temperature: ${o}</p>\\n          </div>\\n        `}document.getElementById(\"weatherData\").innerHTML=i}else{const e=await fetch(`https://api.weatherbit.io/v2.0/forecast/daily?lat=${r}&lon=${a}&days=1&key=80aee9f45fa64af9a37f78ca57292048`);if(!e.ok)throw new Error(\"Error: \"+e.status);const t=await e.json();let n=\"\";for(const e of t.data){const t=e.datetime,o=e.max_temp,r=e.min_temp;n+=`\\n          <div>\\n            <p>Date: ${t}</p>\\n            <p>Weather: ${e.weather.description}</p>\\n            <p>Maximum temperature: ${o}</p>\\n            <p>Minimum temperature: ${r}</p>\\n          </div>\\n        `}document.getElementById(\"weatherData\").innerHTML=n}}catch(e){console.log(e)}else alert(\"Enter a city name\")}async function a(e,t){try{const n=await fetch(e,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(t)});if(!n.ok)throw new Error(\"Error: \"+n);console.log(\"Entry added successfully\")}catch(e){console.log(e)}}document.getElementById(\"generate\").addEventListener(\"click\",r);n(0);n.d(t,\"generateButtonClicked\",(function(){return r})),n.d(t,\"addEntry\",(function(){return a})),console.log(r)}]);","name":"main.js","input":"/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./src/client/js/app.js\n// Create a new date instance dynamically with JS\nlet d = new Date();\nlet newDate = (d.getMonth() + 1) + '.' + d.getDate() + '.' + d.getFullYear();\n\n// API Keys\nconst geoApiKey = 'Soph13';\nconst weatherBitApiKey = '80aee9f45fa64af9a37f78ca57292048';\nconst pixabayApiKey = '38378808-06119754e49cc79e1d83890eb';\nconst visualCrossing = '6V2W7DPS5FP4QDZ4TCN4DR9QT';\n\n// Event listener to add function to existing HTML DOM element\ndocument.getElementById('generate').addEventListener('click', generateButtonClicked);\n\n/* Function to fetch weather data */\nasync function generateButtonClicked() {\n  const city = document.getElementById('city').value;\n  const startDate = new Date(document.getElementById('start_date').value);\n  const endDate = new Date (document.getElementById('end_date').value);\n  let latitude, longitude, countryName;\n  \n  if (document.getElementById('city').value == '') {\n    alert(\"Enter a city name\");\n    return;\n  }\n\n   try {\n    // Fetch geonames data\n    const geonamesResponse = await fetch(\n      `http://api.geonames.org/searchJSON?q=${city}&maxRows=1&username=${geoApiKey}`\n    );\n    if (!geonamesResponse.ok) {\n      throw new Error('Error: ' + geonamesResponse.status);\n    }\n    const geonamesData = await geonamesResponse.json();\n\n    // Process the retrieved geonames data\n    latitude = geonamesData.geonames[0].lat;\n    longitude = geonamesData.geonames[0].lng;\n    countryName = geonamesData.geonames[0].countryName;\n\n    // console.log geonames data\n    console.log('Latitude:', latitude);\n    console.log('Longitude:', longitude);\n    console.log('Country Name:', countryName);\n\n    // Fetch country image from Pixabay API\n    const pixabayResponse = await fetch(\n      `https://pixabay.com/api/?key=${pixabayApiKey}&q=${encodeURIComponent(countryName)}&image_type=photo`\n    );\n    if (!pixabayResponse.ok) {\n      throw new Error('Error: ' + pixabayResponse.status);\n    }\n    const pixabayData = await pixabayResponse.json();\n\n    // Process the retrieved country image data\n    let imageUrl = '';\n    if (pixabayData.hits[0]['id'] != 217186 && pixabayData.hits.length > 0) {\n      imageUrl = pixabayData.hits[0].webformatURL;\n    } else {\n      imageUrl = 'https://images.unsplash.com/photo-1444703686981-a3abbc4d4fe3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80'; // Provide a default image URL in case no image is found\n    }\n\n    // Display the country image\n    const countryImage = document.getElementById('countryImage');\n    countryImage.src = imageUrl;\n    if (imageUrl != '') {\n      countryImage.style.display = 'block';\n    }\n    countryImage.alt = `Image of ${countryName}`;\n    \n    //Process country image text with countryName\n    let imageHeaderHTML = '';\n    if (pixabayData.hits[0]['id'] != 217186  && pixabayData.hits.length > 0){imageHeaderHTML += `\n      <div>\n        <h4>Enjoy your visit to ${countryName}<h4>\n      </div>\n    `;\n    } else {imageHeaderHTML += `\n      <div>\n        <h4>You're still on Earth, but did you enter a city name above?<h4>\n      </div>\n    `;\n    }\n    //Update DOM\n    document.getElementById('imageHeader').innerHTML = imageHeaderHTML;\n  \n    // Calculate the difference in days between today's date (d) and endDate\n    const timeDifference = endDate.getTime() - d.getTime();\n    const dayDifference = timeDifference / (1000 * 3600 * 24);\n\n    if (dayDifference > 1) {\n      // Use Visual Crossing API for date range greater than 1 days\n      const visualCrossingUrl = `https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/${city}/${startDate.toISOString()}/${endDate.toISOString()}?key=${visualCrossing}`;\n      const visualCrossingResponse = await fetch(visualCrossingUrl);\n      if (!visualCrossingResponse.ok) {\n        throw new Error('Error: ' + visualCrossingResponse.status);\n      }\n      const visualCrossingData = await visualCrossingResponse.json();\n      // Process and display visualCrossing data for each date\n      let weatherDataHTML = '';\n      for (const forecast of visualCrossingData.days) {\n        const date = forecast.datetime;\n        const max_temp = forecast.tempmax;\n        const min_temp = forecast.tempmin;\n        const weather = forecast.conditions;\n  \n        // Update the DOM elements with weather data for each date\n        weatherDataHTML += `\n          <div>\n            <p>Date: ${date}</p>\n            <p>Weather: ${weather}</p>\n            <p>Maximum temperature: ${max_temp}</p>\n            <p>Minimum temperature: ${min_temp}</p>\n          </div>\n        `;\n      }\n        \n      // Update the weatherData div with the generated HTML\n      document.getElementById('weatherData').innerHTML = weatherDataHTML;\n      } else {\n      // Use Weatherbit API for date range within 1 day\n      const weatherBitResponse = await fetch(\n      `https://api.weatherbit.io/v2.0/forecast/daily?lat=${latitude}&lon=${longitude}&days=1&key=${weatherBitApiKey}`\n    );\n    if (!weatherBitResponse.ok) {\n      throw new Error('Error: ' + weatherBitResponse.status);\n    }\n    const weatherBitData = await weatherBitResponse.json();\n\n      // Process and display weatherbit data for each date\n      let weatherDataHTML = '';\n      for (const forecast of weatherBitData.data) {\n        const date = forecast.datetime;\n        const max_temp = forecast.max_temp;\n        const min_temp = forecast.min_temp;\n        const weather = forecast.weather.description;\n  \n        // Update the DOM elements with weather data for each date\n        weatherDataHTML += `\n          <div>\n            <p>Date: ${date}</p>\n            <p>Weather: ${weather}</p>\n            <p>Maximum temperature: ${max_temp}</p>\n            <p>Minimum temperature: ${min_temp}</p>\n          </div>\n        `;\n      }\n  \n      // Update the weatherData div with the generated HTML\n      document.getElementById('weatherData').innerHTML = weatherDataHTML;\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n/* Function to POST data */\n// Client-side function to make a POST request and add an entry\nasync function addEntry(url, entryData) {\n  try {\n    const response = await fetch(url, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(entryData),\n    });\n\n    if (response.ok) {\n      console.log('Entry added successfully');\n    } else {\n      throw new Error('Error: ' + response);\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n\n\n// EXTERNAL MODULE: ./src/client/styles/style.css\nvar style = __webpack_require__(0);\n\n// CONCATENATED MODULE: ./src/client/index.js\n/* concated harmony reexport generateButtonClicked */__webpack_require__.d(__webpack_exports__, \"generateButtonClicked\", function() { return generateButtonClicked; });\n/* concated harmony reexport addEntry */__webpack_require__.d(__webpack_exports__, \"addEntry\", function() { return addEntry; });\n\n\n\n\nconsole.log(generateButtonClicked);\n// alert(\"I exist\")\n\n\n\n/***/ })\n/******/ ]);","inputSourceMap":null}